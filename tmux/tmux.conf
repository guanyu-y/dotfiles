#################################################
#
#  Color Theme
# -----------------------------------------------

# Base colors
set -g @pane_base_color 'colour60' # Pane border color
set -g @status_base_color 'colour60' # Status chip base color

set -g @status_bg_color 'colour238' # Status bar background

# Accent color
set -g @status_accent_color 'colour62' # Status highlight
set -g @window_active_color 'colour62'

# Font color
set -g @status_font_color 'brightwhite'


#################################################
#
#  Basic Setting
# -----------------------------------------------

# 256 color terminal
set -g default-terminal 'screen-256color'
set -g terminal-overrides 'xterm:colors=256'

# Change Prefix from Ctrl-b to Ctrl-j
set -g prefix C-j
unbind C-b

set-option -g base-index 1         # Window index starts from 1
set-window-option -g pane-base-index 1   # Pane index starts from 1

set-option -g renumber-windows on   # Renumber windows when closing

# Message display style
set-option -g message-style 'fg=#{@status_font_color},bg=#{@status_accent_color}'

# Pane border style
set-option -g pane-active-border-style 'fg=#{@pane_base_color}'
set-option -g pane-border-style 'fg=#{@pane_base_color}'

#################################################
#
#  KEY BINDING Setting
# -----------------------------------------------

# Reload config
bind-key -T prefix r source-file ~/.config/tmux/tmux.conf \; display-message 'Reload was successful.'


# Pane navigation with vim keys
bind -r h select-pane -L
bind -r j select-pane -D
bind -r k select-pane -U
bind -r l select-pane -R
# Switch panes using Alt-arrow without prefix
bind -n M-Left select-pane -L
bind -n M-Right select-pane -R
bind -n M-Up select-pane -U
bind -n M-Down select-pane -D

# Pane resize with vim keys
bind -r H resize-pane -L 5
bind -r J resize-pane -D
bind -r K resize-pane -U
bind -r L resize-pane -R 5

# Vim-like split
unbind '"'
unbind %
bind s split-window    # Horizontal split
bind v split-window -h # Vertical split

# Vim copy mode
set-window-option -g mode-keys vi
bind-key -T copy-mode-vi 'v' send -X begin-selection
bind-key -T copy-mode-vi 'C-v' send -X rectangle-toggle
bind-key -T copy-mode-vi 'y' send -X copy-selection

# Pane rotation with Ctrl-o / Ctrl-Shift-o
bind -n C-o select-pane -t :.+
bind -n C-S-o select-pane -t :.-

bind -r C-h select-window -t :-     # Prefix + Ctrl-h window switch
bind -r C-l select-window -t :+     # Prefix + Ctrl-l window switch

#################################################
#
#  STATUS BAR Setting
# -----------------------------------------------

set-option -g status-interval 1                # Status bar update: 15s(default) -> 1s

# Length
set-option -g status-left-length 90
set-option -g status-right-length 90

# Contents
set-option -g status-style "bg=#{@status_bg_color},fg=#{@status_font_color}"

# Left: session name
set-option -g status-left '#[fg=#{@status_font_color}, bg=#{@status_base_color}, bold] #S #[fg=#{@status_base_color}, bg=#{@status_bg_color}]'

# Right: date, time, battery, local IP
set-option -g status-right '#{prefix_highlight}\
#[fg=#{@status_base_color}, bg=#{@status_bg_color}] #[fg=#{@status_font_color}, bg=#{@status_base_color}, bold] #(date "+%Y/%m/%d %a")\
#[fg=#{@status_bg_color}, bg=#{@status_base_color}] #[fg=#{@status_base_color}, bg=#{@status_bg_color}]#[fg=#{@status_font_color}, bg=#{@status_base_color}, bold] #(date "+%H:%M")\
#[fg=#{@status_bg_color}, bg=#{@status_base_color}] #[fg=#{@status_base_color}, bg=#{@status_bg_color}]#[fg=#{@status_font_color}, bg=#{@status_base_color}, bold] #(~/.config/tmux/bin/print_battery)%\
#[fg=#{@status_bg_color}, bg=#{@status_base_color}] #[fg=#{@status_base_color}, bg=#{@status_bg_color}]#[fg=#{@status_font_color}, bg=#{@status_base_color}] #(~/.config/tmux/bin/print_local_ip) '

# Window Status
set-window-option -g window-status-separator "" # Remove gap between windows
set-option -g status-justify 'left'   # Left align window-status
# Inactive window
set-window-option -g window-status-format '\
#[fg=#{@status_bg_color}, bg=brightblack]\
#[fg=#{@status_font_color}, bg=brightblack, bold] #W \
#[fg=brightblack, bg=#{@status_bg_color}]'
# Active window
set-window-option -g window-status-current-format '\
#[fg=#{@status_bg_color}, bg=#{@window_active_color}]\
#[fg=#{@status_font_color}, bg=#{@window_active_color}, bold] #W \
#[fg=#{@window_active_color}, bg=#{@status_bg_color}]'
